function [aceptado, rechazado, en_cola, serv_ocup, slow] = funcion_cola_mmc(llegada, BW_cliente, vel_stream, t)\n% Sistema M/M/c con 3 servidores\n\npersistent cola;\npersistent servidores_libres;\npersistent clientes_servicio;\npersistent cola_fifo;\npersistent stats;\n\nif isempty(cola)\n    cola = 0;\n    servidores_libres = 3;\n    clientes_servicio = zeros(3, 2);\n    cola_fifo = [];\n    stats.llegadas = 0;\n    stats.atendidos = 0;\n    stats.rechazados_BW = 0;\n    stats.rechazados_cola = 0;\nend\n\naceptado = 0;\nrechazado = 0;\nslow = 0;\n\n% Procesar fin de servicio\nfor i = 1:3\n    if clientes_servicio(i,1) > 0 && t >= clientes_servicio(i,1)\n        clientes_servicio(i,:) = [0, 0];\n        servidores_libres = servidores_libres + 1;\n        \n        if cola > 0 && ~isempty(cola_fifo)\n            cola = cola - 1;\n            cliente = cola_fifo(1,:);\n            cola_fifo(1,:) = [];\n            \n            servidores_libres = servidores_libres - 1;\n            mu = 1/300;\n            t_serv = -log(rand()) / mu;\n            clientes_servicio(i,:) = [t + t_serv, cliente(2)];\n            stats.atendidos = stats.atendidos + 1;\n        end\n    end\nend\n\n% Procesar llegada\nif llegada == 1\n    stats.llegadas = stats.llegadas + 1;\n    \n    if BW_cliente < vel_stream * 1.1\n        rechazado = 1;\n        slow = 1;\n        stats.rechazados_BW = stats.rechazados_BW + 1;\n    else\n        if servidores_libres > 0\n            aceptado = 1;\n            servidores_libres = servidores_libres - 1;\n            \n            mu = 1/300;\n            t_serv = -log(rand()) / mu;\n            \n            for i = 1:3\n                if clientes_servicio(i,1) == 0\n                    clientes_servicio(i,:) = [t + t_serv, BW_cliente];\n                    break;\n                end\n            end\n            stats.atendidos = stats.atendidos + 1;\n        else\n            if cola < 50\n                cola = cola + 1;\n                cola_fifo = [cola_fifo; t, BW_cliente];\n            else\n                rechazado = 1;\n                stats.rechazados_cola = stats.rechazados_cola + 1;\n            end\n        end\n    end\nend\n\nen_cola = cola;\nserv_ocup = 3 - servidores_libres;\n